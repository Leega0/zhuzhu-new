function inputInit(){var a=$(".ui-input"),b=$(".ui-input-clear"),c=$(".ui-label");a.each(function(){var a=$(this),b=a.attr("placeholder");a.on("focus",function(){var a=$(this);a.parent(".ui-input-content").hasClass("ui-input-wrong")&&a.val("").attr("placeholder",b),a.parent(".ui-input-content").removeClass("ui-input-wrong").addClass("ui-input-focus"),a.parent(".ui-input-content").find(".ui-input-clear").css("display","block")}),a.on("blur",function(){var a=$(this);a.parent(".ui-input-content").removeClass("ui-input-focus"),""==a.val()&&a.parent(".ui-input-content").find(".ui-input-clear").css("display","none")})}),c.on("click",function(){var a=$(this),b=a.next(".ui-input-body").find(".ui-input");b.focus(),$(window).trigger("resize")}),b.on("click",function(){var a=$(this),b=a.parent(".ui-input-content").find(".ui-input");b.val("").focus(),$(window).trigger("resize")})}function checkboxInit(){var a=$(".ui-checkbox");a.each(function(){var a,b=$(this);return b.next(".ui-checkbox-icon")[0]?!1:(b.css("display","none"),a=$('<a class="ui-checkbox-icon" href="javascript:void(0);"></a>'),b.after(a),this.checked&&a.addClass("ui-checkbox-icon-checked"),a.on("click",function(a){a.stopPropagation();var c=$(this);b.trigger("click"),b[0].checked?c.addClass("ui-checkbox-icon-checked"):c.removeClass("ui-checkbox-icon-checked")}),void b.on("click",function(c){c.stopPropagation(),b[0].checked?a.addClass("ui-checkbox-icon-checked"):a.removeClass("ui-checkbox-icon-checked")}))})}function showShade(a,b){var c=$(".ui-shade"),d=void 0==a||null==a||""==a;return c[0]?c.show():(c=$('<div class="ui-shade"></div>'),c.appendTo("body").show()),c.height(deviceHeight>$body.height()?deviceHeight:$body.height()),(null===b||void 0===b||""===b||b===!0)&&c.on("click",function(){d||a.remove(),c.remove()}),$resizeShade=c,c}function dialogOffset(a){var b={};window.Zepto?(b.width=a.width(),b.height=a.height()):(b.width=a.outerWidth(),b.height=a.outerHeight()),b.offsetTop=(deviceHeight-b.height)/2,b.offsetLeft=($(document).width()-b.width)/2,console.log(b.width),a.css({top:b.offsetTop,left:b.offsetLeft}),$(window).scrollTop(0)}function fixedAdaptive(){var a=$(this);deviceHeight<$body.height()+a.height()+4*baseFontsize?a.addClass("ui-fixed-adaptive"):a.removeClass("ui-fixed-adaptive")}var deviceWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,deviceHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,baseFontsize=16,$resizeShade,$body=$("body");if(!window.jQuery)var jQuery=Zepto;$(function(){inputInit(),checkboxInit();var a=$(".account-progress");a.each(function(){var a=$(this),b=a.find(".account-progress-bar"),c=a.find(".account-progress-value").text();b.css("width",c)}),fixedAdaptive.call($(".ui-fixed-bottom")),$(window).on("resize",function(){deviceWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,deviceHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,deviceWidth>400&&428>deviceWidth?baseFontsize=20:deviceWidth>=428&&481>deviceWidth?baseFontsize=24:deviceWidth>=481&&569>deviceWidth?baseFontsize=28:deviceWidth>=569&&(baseFontsize=32),void 0!=$resizeShade&&$resizeShade[0]&&$resizeShade.height(deviceHeight>$body.height()?deviceHeight:$body.height()),fixedAdaptive.call($(".ui-fixed-bottom"))})}),$.dialog=function(a){var b={type:"dialog",isBtn:!0,btn:"",onDialog:null,submitCallback:null,cancelCallback:null,closeCallback:null,redClose:!1,neverAlert:!1,neverFunc:null,submitText:"确认",cancelText:"取消",str:""},c=arguments[1];if("string"!=typeof a)return console.error("引用内容错误"),!1;if(c&&"object"!=typeof c)return console.error("参数错误"),!1;c=$.extend({},b,c);var d;switch(c.type){case"alert":c.str=a,c.btn='<a href="javascript:void(0);" class="ui-btn ui-btn-whiteBlack ui-dialog-btn-submit">'+c.submitText+"</a>";break;case"confirm":c.str=a,c.btn='<a href="javascript:void(0);" class="ui-btn ui-dialog-btn-submit ui-btn-inline ui-btn-whiteBlack">'+c.submitText+'</a><a href="javascript:void(0);" class="ui-btn ui-dialog-btn-cancel ui-btn-inline ui-btn-whiteBlack">'+c.cancelText+"</a>";break;default:c.btn='<a href="javascript:void(0);" class="ui-btn ui-btn-whiteBlack ui-dialog-btn-submit">确定</a>'}if("alert"==c.type||"confirm"==c.type)d=$('<div class="ui-dialog ui-dialog-alert"><i class="ui-dialog-close"></i><p class="ui-dialog-text">'+c.str+"</p>"+(c.neverAlert?'<div class="ui-checkbox-wrap"><input class="ui-checkbox" type="checkbox"/><span class="ui-checkbox-label">不再提示</span></div>':"")+'<div class="ui-dialog-btnWrap">'+c.btn+"</div></div>");else{var e=$(a);d=$('<div class="ui-dialog"><i class="'+(c.redClose?"ui-dialog-close-red":"ui-dialog-close")+'"></i></div>'),e.css("display","block").appendTo(d),c.isBtn&&d.append('<div class="ui-dialog-btnWrap">'+c.btn+"</div>")}var f=$('<div class="ui-shade"></div>'),g=$('<div class="ui-dialog-wrap"></div>');g.append(d).append(f),$body.append(g),g.css("display","block"),f.height(deviceHeight>$body.height()?deviceHeight:$body.height()).css("display","block"),checkboxInit(),dialogOffset(d);var h=$(".ui-dialog-btn-submit",d),i=$(".ui-dialog-btn-cancel",d),j=$(".ui-dialog-close,.ui-dialog-close-red",d),k=$(".ui-checkbox",d);return j.on("click",function(a){return a.preventDefault(),g.dialogOff(),c.closeCallback&&c.closeCallback.call(g)===!1?!1:void 0}),h.on("click",function(a){return a.preventDefault(),g.dialogOff(),c.submitCallback&&c.submitCallback.call(g,k)===!1?!1:void 0}),i.on("click",function(a){return a.preventDefault(),g.dialogOff(),c.cancelCallback&&c.cancelCallback.call(g)===!1?!1:void 0}),$.fn.dialogOff=function(){"alert"==c.type||"confirm"==c.type?g.remove():(e.css("display","none").appendTo("body"),g.remove())},c.onDialog&&c.onDialog.call(g,f)===!1?!1:void 0},$.alert=function(){var a=arguments[0],b={type:"alert",submitCallback:null,closeCallback:null,neverAlert:!1,neverFunc:null,submitText:"确认"},c=arguments[1];return"string"!=typeof a?(console.error("引用内容错误"),!1):c&&"object"!=typeof c?(console.error("参数错误"),!1):(c=$.extend({},b,c),void $.dialog(a,c))},$.confirm=function(){var a=arguments[0],b={type:"confirm",submitCallback:null,closeCallback:null,neverAlert:!1,neverFunc:null,submitText:"确认"},c=arguments[1];return"string"!=typeof a?(console.error("引用内容错误"),!1):c&&"object"!=typeof c?(console.error("参数错误"),!1):(c=$.extend({},b,c),void $.dialog(a,c))},function(a){var b={init:function(b){return this.each(function(){var c=a(this),d={defaultText:"选择"},e=a.extend({},d,b),f=c.attr("id"),g=c.attr("class"),h='<a id="'+f+'_button" href="javascript:void(0);" class="ui-select '+(g?g:"")+'">'+e.defaultText+"</a>";c.before(h),e.btn=a("#"+f+"_button"),c.mobiscroll().select({mod:"scroller",display:"modal",lang:"zh",rows:3,buttons:[{text:"确认",handler:"set",cssClass:"ui-btn-whiteBlack ui-btn"}],inputClass:"ui-hide",onSelect:function(a,b){var c=e.btn,d=b.getVal();c.empty().text(a),e.onSelect.call(c,a,d)}}),e.input=a("#"+f+"_dummy"),e.btn.on("click",function(a){a.preventDefault(),e.input.trigger("click")}),c.data("tinySelect",e)})},reset:function(){return this.each(function(){var b=a(this),c=b.attr("id"),d=a("#"+c+"_button"),e=a("#"+c+"_dummy"),f=b.data("tinySelect");return"undefined"==typeof f?a.error("插件未初始化"):(b.mobiscroll("setVal",0),void(""==e.value||null==e.value||void 0==e.value?d.empty().text(f.defaultText):d.empty().text(e.value)))})}};a.fn.tinySelect=function(){var c=arguments[0];return b[c]?(c=b[c],arguments=Array.prototype.slice.call(arguments,1)):"object"!=typeof c&&c?a.error("该方法不存在！"):c=b.init,c.apply(this,arguments)}}(jQuery),$.item={init:function(){function a(){$.each(f,function(){for(var a=0,c=h.length;c>a;a++)if(this[h[a]]!=v[h[a]])return;$(".item-dialog-detail").next("input[type=hidden]").val(this.id),$(".item-dialog-name").empty().text(this.fullname).next("input[type=hidden]").val(this.fullname),u=this.depositAmount,b()})}function b(){o.val(r),s.text(u*r),t.val(u*r)}var c,d=$("#item-get"),e=arguments[0],f=arguments[1],g=arguments[2],h=[],i=arguments[3];if(e){if(!Array.isArray(f)&&!Array.isArray(g))return $.error("item数据错误");$.each(f,function(){1==this.defaults&&(c=this)}),$.each(g,function(){h.push(this.name)}),d.on("click",function(){var a=$(".item-dialog"),b=$(".item-dialog-close"),c=showShade(a,!1);a.css({display:"block","-webkit-transform":"translate(0, 0)",transform:"translate(0, 0)"}),b.one("click",function(){a.css({display:"block","-webkit-transform":"translate(0, 60em)",transform:"translate(0, 60em)"}),c.remove()})});var j=$(".item-dialog-content"),k=$("#item-count-surplus"),l=$("#item-count-plus"),m=$("#item-count-minus"),n=$("#item-count-temp"),o=$("#item-count"),p=k.text()<=0?0:k.text(),q=p>0?p-1:0,r=1,s=$("#item-money-temp"),t=s.parent("p").next("input[type=hidden]"),u=parseFloat(s.text()),v={};i=i>=p?p:i,n.empty().text(r),j.each(function(){var b=$(this),c=b.find("input[type=hidden]");b.on("click","a.ui-btn-link",function(){var b=$(this);b.addClass("ui-btn-choose").removeClass("ui-btn-unchoose").siblings(".ui-btn-choose").addClass("ui-btn-unchoose").removeClass("ui-btn-choose"),c.val(b.data("value")),v[b.data("type")]=b.data("value"),a()})}),j.find("a.ui-btn-link").each(function(){var a=$(this);$.each(c,function(b,c){a.data("type")==b&&a.data("value")==c&&a.trigger("click")})}),o.val(r),l.on("click",function(){if(void 0==i||"null"==i||0>=i){if(r>=p)return}else if(r>=i)return;r++,q--,n.empty().text(r),b()}),m.on("click",function(){1>=r||(r--,q++,n.empty().text(r),b())})}}},$.fn.bankInput=function(){var a=$(this);a.on("keyup",function(){var b=a.val().replace(/\s/g,"").replace(/(\d{4})(?=\d)/g,"$1 ");a.val(b)})},$.fn.wrongInput=function(a){var b=$(this),c=b.parent();c.addClass("ui-input-wrong"),b.val("").attr("placeholder",a)},$.loadingShow=function(){var a,b="images/loading-image.gif",c=$('<img class="ui-loading" src="" alt=""/>'),d=new Image;d.src=b,d.complete?c[0].src=b:d.onload=function(){c[0].src=b},a=showShade(c,!1),$(window).scrollTop(0),a.append(c),a.addClass("ui-shade")},$.loadingHide=function(){$(document).find(".ui-loading").parent(".ui-shade").remove()};